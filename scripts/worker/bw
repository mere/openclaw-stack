#!/usr/bin/env bash
# In Chloe (worker): run Bitwarden with session from worker state. No bridge.
set -euo pipefail
BW_ENV="/home/node/.openclaw/secrets/bitwarden.env"
BW_SESSION_FILE="/home/node/.openclaw/secrets/bw-session"
export BITWARDENCLI_APPDATA_DIR="/home/node/.openclaw/bitwarden-cli"
[ -f "$BW_ENV" ] && . "$BW_ENV"
[ -f "$BW_SESSION_FILE" ] && export BW_SESSION=$(cat "$BW_SESSION_FILE")
[ -n "${BW_SERVER:-}" ] && bw config server "$BW_SERVER" >/dev/null 2>&1 || true
exec bw "$@"
